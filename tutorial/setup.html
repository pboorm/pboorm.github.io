<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Using academicons -->
  <!-- <link rel="stylesheet" href="./assets/academicons-1.9/css/academicons.min.css"/> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <!-- Using fontawesome -->
  <script src="https://kit.fontawesome.com/f5e5434f52.js" crossorigin="anonymous"></script>


  <!-- <link rel="apple-touch-icon" href="./favicon.ico" /> -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Setup</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
  <!-- <meta content="" name="description"> -->
  <!-- <meta content="" name="keywords"> -->
  <meta property="og:title" content="Setup" />
  <meta property="og:locale" content="en_UK" />
  <meta name="description" content="Setup" />
  <meta property="og:description" content="Setup" />
  <link rel="canonical" href="https://peterboorman.com/" />
  <meta property="og:url" content="https://peterboorman.com/" />
  <meta property="og:site_name" content="Setup" />
  <script type="application/ld+json">
  {"@type":"WebSite","headline":"Setup","url":"https://peterboorman.com/tutorial_bxa.html","description":"Setup","name":"Setup","@context":"https://schema.org"}</script>

  <!-- Favicons -->
  <!-- <link href="../assets/img/favicon.png" rel="icon"> -->
  <link href="favicon.ico" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="../assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: iPortfolio - v1.4.1
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <div class="progressContainer"><div id="progress" class="progress"></div></div>


  <!-- ======= Mobile nav toggle button ======= -->
  <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">
      <div class="profile">
        <a href="../tutorial_bxa.html"><img src="../figures/plots_logo.png" alt="" class="img-fluid rounded-circle"></img></a>
        <p></p>
        <h1 class="specific"><a href="#whybxa">Setup</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="http://johannesbuchner.github.io/BXA/" class="github"><i class="bx bxl-github"></i></a>
          <a href="#contact"><i class="bx bx-envelope"></i></a>
        </div>
      </div>

      <nav class="nav-menu">
        <ul>
          <li><a href="../tutorial_bxa.html#welcome"><i class="bx bx-star"></i> <span>Welcome</span></a></li>
          <li><a href="whybxa.html"><i class="icofont-light-bulb"></i> <span>Why use BXA?</span></a></li>
          <li><a href="setup.html"><i class="icofont-tools-alt-2"></i> <span>Setup</span></a></li>
          <li><a href="setup.html#download"><i class="bx bx-download"></i> <span>Download spectra</span></a></li>
          <li><a href="session0.html"><i class="bx bx-terminal"></i>Session 0 - X-ray spectral fitting</a></li>
          <li><a href="session0.html#ex01"><i class="bx bx-chevron-right"></i>0.1 - binning data</a></li>
          <li><a href="session0.html#ex02"><i class="bx bx-chevron-right"></i>0.2 - loading data</a></li>
          <li><a href="session0.html#ex03"><i class="bx bx-chevron-right"></i>0.3 - plotting</a></li>
          <li><a href="session0.html#ex04"><i class="bx bx-chevron-right"></i>0.4 - fitting</a></li>
          <li><a href="session0.html#ex05"><i class="bx bx-chevron-right"></i>0.5 - simulating data</a></li>
          <li><a href="session1.html"><i class="bx bx-line-chart"></i>Session 1 - BXA</a></li>
          <li><a href="session1.html#ex11"><i class="bx bx-chevron-right"></i>1.1 - prior predictive checks</a></li>
          <li><a href="session1.html#ex12"><i class="bx bx-chevron-right"></i>1.2 - fitting a model</a></li>
          <li><a href="session1.html#ex13"><i class="bx bx-chevron-right"></i>1.3 - fit some more models</a></li>
          <li><a href="session1.html#ex14"><i class="bx bx-chevron-right"></i>1.4 - error propagation</a></li>
          <li><a href="session1.html#ex15"><i class="bx bx-chevron-right"></i>1.5 - fit multiple datasets</a></li>
          <li><a href="session1.html#ex16"><i class="bx bx-chevron-right"></i>1.6 - background fitting</a></li>
          <li><a href="session2.html"><i class="bx bx-check-circle"></i>Session 2 - model checking</a></li>
          <li><a href="session2.html#ex21"><i class="bx bx-chevron-right"></i>2.1 - visualisation</a></li>
          <li><a href="session2.html#ex22"><i class="bx bx-chevron-right"></i>2.2 - quantile-quantile checks</a></li>
          <li><a href="session2.html#ex23"><i class="bx bx-chevron-right"></i>2.3 - posterior predictive checks</a></li>
          <li><a href="session3.html"><i class="bx bx-select-multiple"></i>Session 3 - model comparison</a></li>
          <li><a href="session3.html#ex31"><i class="bx bx-chevron-right"></i>3.1 - Bayes factors</a></li>
          <li><a href="session3.html#ex32"><i class="bx bx-chevron-right"></i>3.2 - type I errors</a></li>
          <li><a href="session3.html#ex33"><i class="bx bx-chevron-right"></i>3.3 - type II errors</a></li>
          <li><a href="session3.html#ex34"><i class="bx bx-chevron-right"></i>3.4 - extension</a></li>
          <li><a href="session4.html"><i class="bx bx-bar-chart-alt-2"></i>Session 4 - parent distributions</a></li>
          <li><a href="session4.html#ex41"><i class="bx bx-chevron-right"></i>4.1 - Gaussian</a></li>
          <li><a href="session4.html#ex42"><i class="bx bx-chevron-right"></i>4.2 - histogram</a></li>
          <li><a href="session4.html#ex43"><i class="bx bx-chevron-right"></i>4.3 - preparing for a proposal</a></li>
          <li><a href="session5.html"><i class="bx bx-analyse"></i>Session 5 - advanced usage</a></li>
          <li><a href="session5.html#ex51"><i class="bx bx-chevron-right"></i>5.1 - information gain</a></li>
          <li><a href="session5.html#ex52"><i class="bx bx-chevron-right"></i>5.2 - custom priors</a></li>
          <li><a href="session5.html#ex53"><i class="bx bx-chevron-right"></i>5.3 - step samplers</a></li>
          <li><a href="tipsandtricks.html"><i class="bx bx-bulb"></i> <span>Tips & tricks</span></a></li>
          <li><a href="links.html"><i class="bx bx-bookmarks"></i> <span>Useful links</span></a></li>
          <li><a href="#contact"><i class="icofont-letter"></i>Contact</a></li>
          <li><p>&nbsp; </p></li>
          <li><p>&nbsp; </p></li>
          <li><p>&nbsp; </p></li>
          <li><p>&nbsp; </p></li>
          <li><p>&nbsp; </p></li>
          <li><p>&nbsp; </p></li>
        </ul>
      </nav><!-- .nav-menu -->
      <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

    </div>
    </div>
  </header><!-- End Header -->

  <main id="main">


<section id="setup" class="services">
      <div class="container">
        <div class="section-title">
          <h2><i class="icofont-tools-alt-2"></i> Setup</h2>
          <h3>&#9888;&#65039; <font color="red">WARNING!</font> &#9888;&#65039; BXA requires a working form of <a target="_blank" href="https://heasarc.gsfc.nasa.gov/xanadu/xspec/python/html/index.html">PyXspec</a> and/or <a target="_blank" href="https://cxc.cfa.harvard.edu/sherpa/">Sherpa</a>.</h3>
          <p>Make sure either of these are installed before doing the exercises! Also note the exercises were written for BXA <a href="https://github.com/JohannesBuchner/BXA/releases" target="_blank">v4.0.5</a> - if some commands are not working as expected, check which version you are running.</p>
          </br>

          <h3>For PyXspec users</h3>
          First, install PyXspec:
          <ul>
          <li>Using PyXspec requires a source distribution of HEASoft. See install instructions here:<br/><a target="_blank" href="https://heasarc.gsfc.nasa.gov/docs/software/heasoft/">https://heasarc.gsfc.nasa.gov/docs/software/heasoft/</a><br/></li>
          </ul>

          We advise using a conda environment (e.g. with <a target="_blank" href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a>) to ensure no conflicts occur when installing the Python packages required for BXA. If you have not created a dedicated BXA conda environment before:
          <ul>
          <li>Create a new conda environment:</br>
            <code>$ conda create -n xspecbxa python=3.8</code>&nbsp; <button class="cpbt" onclick="cx('conda create -n xspecbxa python=3.8')"><i class="icofont-copy"></i></button></li>
          <li>Activate the new environment:</br>
            <code>$ conda activate xspecbxa</code>&nbsp; <button class="cpbt" onclick="cx('conda activate xspecbxa')"><i class="icofont-copy"></i></button></li>
          <li>Install BXA:
            <ul>
              <li>With Anaconda:
                <br>
                <code>$ conda install -c conda-forge bxa</code>&nbsp; <button class="cpbt" onclick="cx('conda install -c conda-forge bxa')"><i class="icofont-copy"></i></button>
              </li>
              <li>With <code>pip</code> (<b>see warning below</b>):
                <br>
                <code><pre>
$ pip install requests corner astropy h5py cython scipy tqdm pandas
$ pip install bxa</pre></code>
&nbsp; <button class="cpbt" onclick="cx('pip install requests corner astropy h5py cython scipy tqdm\npip install bxa')"><i class="icofont-copy"></i></button>
              </li>
            </ul>
          </ul>

          Once the install process has finished, check everthing is installed and works as required:&nbsp; <button class="cpbt" onclick="cx('python -c \'import xspec\'\npython -c \'import ultranest\'\npython -c \'import bxa.xspec as bxa\'')"><i class="icofont-copy"></i></button>
          <ul>
            <li>Check PyXspec works:
              <br>
              <code>$ python -c 'import xspec'</code>
              &nbsp; <button class="cpbt" onclick="cx('python -c \'import xspec\'')"><i class="icofont-copy"></i></button>
            </li>
            <li>Check UltraNest works:
              <br>
              <code>$ python -c 'import ultranest'</code>
              &nbsp; <button class="cpbt" onclick="cx('python -c \'import ultranest\'')"><i class="icofont-copy"></i></button>
            </li>
            <li>Check BXA works:
              <br>
              <code>$ python -c 'import bxa.xspec as bxa'</code>
              &nbsp; <button class="cpbt" onclick="cx('python -c \'import bxa.xspec as bxa\'')"><i class="icofont-copy"></i></button>
            </li>
          </ul>
          If no error messages come up from these commands, BXA and PyXspec should work.

        </br></br>

          <h3>For Sherpa users</h3>
          <ul>
          <li>First, install CIAO and Sherpa in a conda environment:<br/><a target="_blank" href="https://cxc.cfa.harvard.edu/ciao/download/">https://cxc.cfa.harvard.edu/ciao/download/</a><br/></li>
          <li>Once the install process has finished, check Sherpa works:</br>
          <code><pre>
$ conda activate ciao-environment-name
$ sherpa</pre></code> <button class="cpbt" onclick="cx('conda activate ciao-environment-name\nsherpa')"><i class="icofont-copy"></i></button></br><!-- &nbsp; <button class="cpbt" onclick="cx('conda activate ciao-environment-name')"><i class="icofont-copy"></i></button><br/> -->

          If there are no errors, Sherpa should be working as expected.
          </li>
        </ul>

        Then install BXA inside the CIAO conda environment:
        <ul>
          <li>Activate the environment:
            <br>
            <code>$ conda activate ciao-environment-name</code>
            &nbsp; <button class="cpbt" onclick="cx('conda activate ciao-environment-name')"><i class="icofont-copy"></i></button></li>
          <li>Install BXA:
            <ul>
              <li>With Anaconda:
                <br>
                <code>$ conda install -c conda-forge bxa</code>
                &nbsp; <button class="cpbt" onclick="cx('conda install -c conda-forge bxa')"><i class="icofont-copy"></i></button>
              </li>
              <li>With <code>pip</code> (<b>see warning below</b>):
                <br>
                <code><pre>
$ pip install requests corner astropy h5py cython scipy tqdm pandas
$ pip install bxa</pre></code>
&nbsp; <button class="cpbt" onclick="cx('pip install requests corner astropy h5py cython scipy tqdm\npip install bxa')"><i class="icofont-copy"></i></button>
              </li>
            </ul>
          </ul>

          Once the install process has finished, check everthing works as required:&nbsp; <button class="cpbt" onclick="cp('python -c \'import ultranest\'\npython -c \'import bxa.sherpa as bxa\'')"><i class="icofont-copy"></i></button>
          <ul>
            <li>Check UltraNest works:
              <br>
              <code>$ python -c 'import ultranest'</code>
            &nbsp; <button class="cpbt" onclick="cp('python -c \'import ultranest\'')"><i class="icofont-copy"></i></button>
            </li>
            <li>Check BXA works:
              <br>
              <code>$ python -c 'import bxa.sherpa as bxa'</code>
              &nbsp; <button class="cpbt" onclick="cp('python -c \'import bxa.sherpa as bxa\'')"><i class="icofont-copy"></i></button>
            </li>
          </ul>
          If no error messages come up from these commands, BXA should work with Sherpa.

        

        <br>
        <br>
         *&#9888;&#65039; <b>Warning!</b> 
         <br>
         Installing packages with <code>conda</code> and <code>pip</code> can lead to package conflicts, such as:
         <br>
         <code><pre>
ValueError: numpy.ndarray size changed, may indicate binary incompatibility. Expected 96 from C header, got 88 from PyObject
</pre></code>
<br>
If this occurs, from inside your <code>conda</code> environment use:
<br>
<code><pre>
pip uninstall ultranest
conda install -c conda-forge ultranest
</pre></code>
&nbsp; <button class="cpbt" onclick="cp('pip uninstall ultranest\nconda install -c cond-forge ultranest')"><i class="icofont-copy"></i></button></li></ul></li></ul>

      </div>
    </div>
</section>


<section id="download" class="services">
      <div class="container">
        <div class="section-title">
          <a class="titlelink" href="tutorial_data.zip" style="color: #173b6c;" download>
          <h2><i class="bx bx-download"></i> Download spectra <a class="headerlink" href="#download" title="Permalink to this headline" style="font-size: 20px;"><i class="icofont-link-alt"></i></a></h2>
          </a>

          <p>If you don't have your own, download the following spectral data to use with the tutorial, simulated from the X-ray space telescopes <a href="https://www.nustar.caltech.edu" target="_blank">NuSTAR</a> and <a href="https://chandra.harvard.edu" target="_blank">Chandra</a>.
          </p>
          </br>
          <div class="col-lg-12 col-md-6 icon-box">
            <div class="icon" style="color: #173b6c;"><a href="tutorial_data.zip" download><i class="bx bx-download"></i></a></div>
          </div>
        </br></br>
          <p>The zip file contains:</p>
        <ul>
          <li><code>nustar_src.pha</code>: NuSTAR source + background spectrum</li>
          <li><code>nustar.rmf</code>: NuSTAR response file</li>
          <li><code>nustar.arf</code>: NuSTAR effective area file</li>
          <li><code>nustar_bkg.pha</code>: NuSTAR background spectrum</li>
          <li><code>chandra_src.pi</code>: Chandra source + background spectrum</li>
          <li><code>chandra.rmf</code>: Chandra response file</li>
          <li><code>chandra.arf</code>: Chandra effective area file</li>
          <li><code>chandra_bkg.pi</code>: Chandra background spectrum</li>
        </ul>

        <p>For an explanation of the roles each of these files plays, see the <a href="https://cxc.cfa.harvard.edu/cdo/xray_primer.pdf" target="_blank">CXC X-ray Primer</a>.</p></br>

        <p>Depending on the fitting method being used, make sure to bin your spectra appropriately before fitting (see <a href="session0.html#ex01" target="_blank">Exercise 0.1</a>).</p>

        
            
        
      </div>
    </div>
</section>


<section id="nav" class="contact">
      <div class="container">
        <div class="row">
          <div class="col-lg-6">
            <div class="info">
                <a href="whybxa.html"><h4>Previous: Why use BXA?</h4></a>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="info">
                <a href="session0.html"><h4>Next: Session 0 - X-ray spectral fitting</h4></a>
            </div>
          </div>
        </div>
      </div>
</section>


<section id="contact" class="contact">
      <div class="container">

        <div class="section-title">
          <a class="collapselink" data-toggle="collapse" href="#collapse-contact" aria-expanded="true" aria-controls="collapse-contact" style="color: #173b6c;">
          <h2><i class="bx bx-envelope"></i> Contact</a> <a class="headerlink" href="#contact" title="Permalink to this headline" style="font-size: 20px;"><i class="icofont-link-alt"></i></a></h2>
        </a>
        </div>
        <div class="collapse show" id="collapse-contact">

                <div class="row">

          <div class="col-lg-6">
            <div class="info">
                  <i class="icofont-question"></i>
                <h4>Raising issues</h4>
                <br>
                <ul>
                  <li>BXA: <a href="https://github.com/JohannesBuchner/BXA/issues" target="_blank">github.com/JohannesBuchner/BXA/issues</a></li>
                  <li>UltraNest: <a href="https://github.com/JohannesBuchner/UltraNest/issues" target="_blank">github.com/JohannesBuchner/UltraNest/issues</a></li>

              </div>
            </div>

          <div class="col-lg-6">
            <div class="info">
              <i class="icofont-envelope"></i>
                <h4>Email</h4>
                <br>
                <ul>
                  <li>Peter Boorman: <a href="mailto:boorman[at]asu[dot]cas[dot]cz">boorman[at]asu[dot]cas[dot]cz</a></li>
                  <li>Johannes Buchner: <a href="mailto:jbuchner[at]mpe[dot]mpg[dot]de">jbuchner[at]mpe[dot]mpg[dot]de</a></li>
                </ul>
            </div>
            </div>
          </div>


          
      </div>
</section>




  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="social-links mt-3 text-left">
          <a href="../tutorial_bxa.html"><i class="bx bx-home-alt"></i></a>
        </div>
      <!-- <div class="copyright">
        <a target="_blank" href="https://peterboorman.com"><i class="bx bx-arrow-back"></i> </a>
      </div> -->
      <!-- <div class="credits"> -->
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/ -->
        <!-- Design: <a href="https://bootstrapmade.com/">BootstrapMade</a> -->
      <!-- </div> -->
    </div>
  </footer>
  <!-- End  Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="assets/vendor/counterup/counterup.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <script src="assets/js/scroll.js"></script>

  <script>
    // https://stackoverflow.com/questions/67016340/javascript-copy-to-clipboard-without-concrete-id-in-html-tag
    function cp(id) {
  if (!id) return;
  const code = document.getElementById(id);
  if (!code) return;
  if (navigator && navigator.clipboard) { // need to check because it's only available on https and localohost
    navigator.clipboard.writeText(code.innerHTML);
  }
};
  </script>

  <script>
    // https://stackoverflow.com/questions/67016340/javascript-copy-to-clipboard-without-concrete-id-in-html-tag
    function cx(tx) {
  if (!tx) return;
  if (navigator && navigator.clipboard) { // need to check because it's only available on https and localohost
    navigator.clipboard.writeText(tx);
  }
};
  </script>
</body>

</html>